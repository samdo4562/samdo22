<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>오늘 뭐 먹지?</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      text-align: center;
      margin: 20px;
      background-color: #f9f9f9;
      color: #333;
    }
    .nav-menu {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      padding: 10px;
    }
    .nav-menu a {
      padding: 12px 18px;
      background-color: #007aff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: 0.3s;
      white-space: nowrap;
      cursor: pointer;
    }
    .nav-menu a:hover {
      background-color: #0056b3;
      transform: scale(1.05);
    }
    .grid-container {
      display: none;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      max-width: 1200px;
      margin: auto;
    }
    .container {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 10px;
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
      background-color: white;
    }
    .container img {
      width: 50%;
      max-width: 200px;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    h2, p {
      margin: 5px 0;
    }
    .map-link {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 12px;
      background-color: #007aff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: 0.3s ease;
      font-size: 0.9rem;
    }
    .map-link:hover {
      background-color: #0056b3;
      transform: scale(1.05);
    }
    .map-links {
      margin-top: 10px;
    }
    @media (max-width: 900px) {
      .grid-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 600px) {
      .grid-container {
        grid-template-columns: repeat(1, 1fr);
      }
    }
  </style>
  
  <!-- 번역 스크립트 -->
  <script>
    // 인터페이스 텍스트 번역 객체
    var translations = {
      "ko": {
        "pageTitle": "오늘 뭐 먹지?",
        "navMenu": {
          "lunch": "밥심🍚",
          "dinner": "술때려🍺",
          "dessert": "미식로드🌍",
          "waiting": "빵지순례🍞",
          "cafe": "감성한모금☕"
        },
        "categoryTitle": {
          "lunch": "🍚 한식 맛집 추천 (10곳)",
          "dinner": "🍺 술집 맛집 추천 (10곳)",
          "dessert": "🌍 외국음식 맛집 추천 (10곳)",
          "waiting": "🍞 빵집 맛집 추천 (10곳)",
          "cafe": "☕ 카페 맛집 추천 (10곳)"
        }
      },
      "en": {
        "pageTitle": "What Should I Eat Today?",
        "navMenu": {
          "lunch": "Korean Food 🍚",
          "dinner": "Pub Food 🍺",
          "dessert": "International Food 🌍",
          "waiting": "Bakery 🍞",
          "cafe": "Cafe ☕"
        },
        "categoryTitle": {
          "lunch": "Korean Restaurant Recommendations (10)",
          "dinner": "Pub Restaurant Recommendations (10)",
          "dessert": "International Restaurant Recommendations (10)",
          "waiting": "Bakery Recommendations (10)",
          "cafe": "Cafe Recommendations (10)"
        }
      },
      "zh": {
        "pageTitle": "今天吃什么？",
        "navMenu": {
          "lunch": "韩餐推荐 🍚",
          "dinner": "酒吧推荐 🍺",
          "dessert": "国际美食推荐 🌍",
          "waiting": "面包店推荐 🍞",
          "cafe": "咖啡厅推荐 ☕"
        },
        "categoryTitle": {
          "lunch": "韩餐美食推荐 (10家)",
          "dinner": "酒吧美食推荐 (10家)",
          "dessert": "国际美食推荐 (10家)",
          "waiting": "面包店推荐 (10家)",
          "cafe": "咖啡厅推荐 (10家)"
        }
      }
    };

    // 사업체(맛집) 이름 번역 객체
    var businessTranslations = {
      // 한식 (lunch)
      "한라돈까스": { "en": "Halladon Katsu", "zh": "汉拉炸猪排" },
      "미친부엌 바이 제주면소": { "en": "Mad Kitchen by Jeju Myeonso", "zh": "疯厨房·济州面所" },
      "말고기연구소": { "en": "Experimental Meat Lab", "zh": "实验肉研究所" },
      "우도근고기": { "en": "Udo Beef", "zh": "牛肉岛" },
      "숲제주": { "en": "Forest Jeju", "zh": "森林济州" },
      "20년전통부대찌개": { "en": "20-Year Tradition Army Stew", "zh": "20年传统部队锅" },
      "제주에가면": { "en": "Jeju If You Go", "zh": "去济州" },
      "진이칼국수": { "en": "Jin's Knife-cut Noodles", "zh": "真意刀削面" },
      "남문숯불바베큐&치킨 본점": { "en": "Nammun Charcoal BBQ & Chicken Main Branch", "zh": "南门炭火烧烤&鸡肉总店" },
      "모던그릴": { "en": "Modern Grill", "zh": "现代烤肉" },
      // 술집 (dinner)
      "스타메노 스키야키": { "en": "Stamen Sukiyaki", "zh": "星马诺寿喜烧" },
      "단도리": { "en": "Dandori", "zh": "单多里" },
      "파라디소": { "en": "Paradiso", "zh": "天堂" },
      "산전수전": { "en": "Trials & Tribulations", "zh": "历经风雨" },
      "타인의취향": { "en": "Other's Taste", "zh": "他人之味" },
      "태양상회": { "en": "Sunshine Mart", "zh": "太阳商会" },
      "뽀빠이": { "en": "Popeye", "zh": "大力水手" },
      "자유의지2 제주혼술바": { "en": "Freedom Will 2 Jeju Solo Bar", "zh": "自由意志2 济州独饮吧" },
      "부가네얼큰이 본점": { "en": "Bugane Spicy Soup Main Branch", "zh": "富加辣汤总店" },
      "AMU아무": { "en": "AMU Any", "zh": "AMU随便" },
      // 외국음식 (dessert)
      "아살람레스토랑": { "en": "Asalam Restaurant", "zh": "阿萨拉姆餐厅" },
      "김원꼬치점": { "en": "Kim Won Kkochi", "zh": "金元串串" },
      "도토리키친 본점": { "en": "Dotori Kitchen Main", "zh": "栗子厨房总店" },
      "유메": { "en": "Yume", "zh": "梦" },
      "오랑우탄면사무소 제주공항점": { "en": "Orangutan Noodle Office Jeju Airport", "zh": "猩猩面所 济州机场" },
      "잉가이": { "en": "Ingai", "zh": "影街" },
      "올리다버거": { "en": "Olida Burger", "zh": "欧丽汉堡" },
      "비꼴로": { "en": "Bikkolo", "zh": "毕科罗" },
      "초리": { "en": "Chori", "zh": "初力" },
      "미친부엌 제주본점": { "en": "Mad Kitchen Jeju Main", "zh": "疯厨房 济州总店" },
      // 빵집 (waiting)
      "콜롱주": { "en": "Kolong Juice", "zh": "可隆酒" },
      "베터플랫": { "en": "Better Flat", "zh": "贝特平" },
      "ABC에이팩토리베어커리카페": { "en": "ABC A Factory Bear Bakery Cafe", "zh": "ABC工厂熊面包咖啡厅" },
      "레이어스베이크하우스": { "en": "Layers Bakehouse", "zh": "层次烘焙屋" },
      "베오크": { "en": "Beoque", "zh": "贝欧克" },
      "레드와칠리페퍼스": { "en": "Red & Chili Peppers", "zh": "红辣椒" },
      "종스브레드": { "en": "Jong's Bread", "zh": "钟面包" },
      "시나브로": { "en": "Sinabro", "zh": "诗那布罗" },
      "원더 샌드위치&김밥": { "en": "Wonder Sandwich & Kimbap", "zh": "奇妙三明治&紫菜包饭" },
      "무근성양과점": { "en": "Mugeunseong Confectionery", "zh": "武根成糖果店" },
      // 카페 (cafe)
      "카페아네스": { "en": "Cafe Anes", "zh": "咖啡阿尼斯" },
      "베이크앤브루": { "en": "Bake & Brew", "zh": "烘焙与酿造" },
      "고미미": { "en": "Gomimi", "zh": "高米米" },
      "아쿠포": { "en": "Akupo", "zh": "阿库波" },
      "카페송키&탑동회관": { "en": "Cafe Songki & Tapdong Hall", "zh": "咖啡宋奇 & 塔洞会馆" },
      "아그당": { "en": "Agdang", "zh": "阿格当" },
      "헬로효주": { "en": "Hello Hyoju", "zh": "你好孝柱" },
      "어반브루잉": { "en": "Urban Brewing", "zh": "城市酿造" },
      "무슈부부커피스탠드 관덕정": { "en": "Mooshu Buboo Coffee Stand Gwandukjeong", "zh": "慕树布布咖啡亭 观德亭" },
      "카페단단": { "en": "Cafe Dandan", "zh": "咖啡丹丹" }
    };

    // 전역 변수
    var currentLang = "ko";
    var currentCategory = 'lunch';
    var currentTitle = translations[currentLang].categoryTitle["lunch"];

    // 브라우저 언어 감지
    var userLang = navigator.language || navigator.userLanguage;
    if(userLang.startsWith("en")){
      currentLang = "en";
    } else if(userLang.startsWith("zh")){
      currentLang = "zh";
    } else {
      currentLang = "ko";
    }

    // 페이지 인터페이스 및 맛집 목록 업데이트 함수
    function setLanguage() {
      // 페이지 제목 업데이트
      document.querySelector("h1").textContent = translations[currentLang].pageTitle;
      // 내비게이션 메뉴 업데이트
      var navLinks = document.querySelectorAll(".nav-menu a");
      var categories = ["lunch", "dinner", "dessert", "waiting", "cafe"];
      navLinks.forEach(function(link, index) {
        link.textContent = translations[currentLang].navMenu[categories[index]];
        link.onclick = function() {
          showCategory(categories[index]);
        };
      });
      // 기본 카테고리 제목 업데이트
      document.getElementById("category-title").textContent = translations[currentLang].categoryTitle["lunch"];
      // 맛집 목록의 사업체 이름 업데이트
      updateBusinessNames();
    }

    // 맛집 목록의 사업체 이름 업데이트 함수
    function updateBusinessNames() {
      var headers = document.querySelectorAll('.container h2');
      headers.forEach(function(h2) {
        var original = h2.getAttribute("data-original");
        if(!original) {
          // 처음 업데이트 시, 원본 텍스트를 저장
          original = h2.textContent;
          h2.setAttribute("data-original", original);
        }
        if(businessTranslations[original]) {
          h2.textContent = businessTranslations[original][currentLang] || original;
        } else {
          h2.textContent = original;
        }
      });
    }

    // 수정된 showCategory 함수 (카테고리 제목 및 맛집 이름 업데이트)
    function showCategory(category) {
      var titleText = translations[currentLang].categoryTitle[category];
      currentCategory = category;
      currentTitle = titleText;
      document.querySelectorAll('.grid-container').forEach(function(div) {
        div.style.display = 'none';
      });
      var categoryContainer = document.getElementById(category);
      if(categoryContainer) {
        var items = Array.from(categoryContainer.children);
        items.sort(() => Math.random() - 0.5);
        items.forEach(function(item) {
          categoryContainer.appendChild(item);
        });
        categoryContainer.style.display = 'grid';
        document.getElementById('category-title').textContent = titleText;
        updatePlaceImages();
        updateBusinessNames();
      }
    }

    // 네이버 API를 통한 대표 이미지 가져오기 (기존 코드 유지)
    async function fetchPlaceImage(query) {
      const clientId = "YOUR_CLIENT_ID";
      const clientSecret = "YOUR_CLIENT_SECRET";
      const url = `https://openapi.naver.com/v1/search/local.json?query=${encodeURIComponent(query)}&display=1&sort=random`;
      try {
        const response = await fetch(url, {
          method: "GET",
          headers: {
            "X-Naver-Client-Id": clientId,
            "X-Naver-Client-Secret": clientSecret
          }
        });
        const data = await response.json();
        console.log("API 응답 데이터:", data);
        if(data.items.length > 0 && data.items[0].image) {
          return data.items[0].image;
        } else {
          return "placeholder.jpg";
        }
      } catch(error) {
        console.error("네이버 API 요청 오류:", error);
        return "placeholder.jpg";
      }
    }

    async function updatePlaceImages() {
      document.querySelectorAll('.grid-container').forEach(async function(gridContainer) {
        if(gridContainer.style.display !== 'none') {
          gridContainer.querySelectorAll('.container').forEach(async function(container) {
            const placeName = container.querySelector('h2').getAttribute("data-original") || container.querySelector('h2').textContent;
            const imgElement = container.querySelector('img');
            imgElement.src = await fetchPlaceImage(placeName);
          });
        }
      });
    }

    // 모바일 네이버지도 처리 (기존 코드 유지)
    document.addEventListener('DOMContentLoaded', function(){
      var naverLinks = document.querySelectorAll('a[href^="https://map.naver.com/"]');
      naverLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
          if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
            e.preventDefault();
            var url = new URL(link.href);
            var query = url.searchParams.get('query') || '';
            var hasBlurred = false;
            var fallbackTimeout;
            window.onblur = function() {
              hasBlurred = true;
              clearTimeout(fallbackTimeout);
            };
            window.onfocus = function() {
              if(hasBlurred) {
                showCategory(currentCategory);
              }
              window.onblur = null;
              window.onfocus = null;
            };
            fallbackTimeout = setTimeout(function(){
              if(!hasBlurred) {
                window.location.href = 'https://m.map.naver.com/search2/search.naver?query=' + encodeURIComponent(query);
              }
            }, 1500);
            window.location.href = 'nmap://search?query=' + encodeURIComponent(query);
          }
        });
      });
    });

    window.onload = function() {
      setLanguage();
      showCategory('lunch');
    };
  </script>
</head>
<body>
  <h1>오늘 뭐 먹지?</h1>
  <div class="nav-menu">
    <a onclick="showCategory('lunch', '🍚 한식 맛집 추천')">밥심🍚</a>
    <a onclick="showCategory('dinner', '🍺 술집 맛집 추천')">술때려🍺</a>
    <a onclick="showCategory('dessert', '🌍 외국음식 맛집 추천')">미식로드🌍</a>
    <a onclick="showCategory('waiting', '🍞 빵집 맛집 추천')">빵지순례🍞</a>
    <a onclick="showCategory('cafe', '☕ 카페 맛집 추천')">감성한모금☕</a>
  </div>
  <h2 id="category-title">🍚 한식 맛집 추천 (10곳)</h2>
  
  <!-- 맛집 목록은 그대로 유지 (각 grid-container 내의 모든 container 내용) -->
  <!-- 밥심(한식) -->
  <div id="lunch" class="grid-container">
    <!-- 1 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>한라돈까스</h2>
      <p>(제주시 탑동로 27)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 한라돈까스" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 한라돈까스" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 한라돈까스" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 2 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>미친부엌 바이 제주면소</h2>
      <p>(제주시 중앙로2길 41)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 미친부엌 바이 제주면소" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 미친부엌 바이 제주면소" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 미친부엌 바이 제주면소" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 3 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>말고기연구소</h2>
      <p>(제주시 북성로 43)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 말고기연구소" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 말고기연구소" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 말고기연구소" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 4 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>우도근고기</h2>
      <p>(제주시 북성로 28)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 우도근고기" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 우도근고기" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 우도근고기" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 5 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>숲제주</h2>
      <p>(제주시 무근성3길 9)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 숲제주" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 숲제주" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 숲제주" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 6 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>20년전통부대찌개</h2>
      <p>(제주시 중앙로14길 35)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 20년전통부대찌개" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 20년전통부대찌개" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 20년전통부대찌개" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 7 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>제주에가면</h2>
      <p>(제주시 탑동로 119)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 제주에가면" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 제주에가면" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 제주에가면" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 8 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>진이칼국수</h2>
      <p>(제주시 남성로 154)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 진이칼국수" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 진이칼국수" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 진이칼국수" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 9 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>남문숯불바베큐&치킨 본점</h2>
      <p>(제주시 중앙로 118-1)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 남문숯불바베큐&치킨 본점" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 남문숯불바베큐&치킨 본점" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 남문숯불바베큐&치킨 본점" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
    <!-- 10 -->
    <div class="container">
      <img src="placeholder.jpg" alt="이미지">
      <h2>모던그릴</h2>
      <p>(제주시 전농로 73-1)</p>
      <div class="map-links">
        <a href="https://map.naver.com/?query=제주시 모던그릴" class="map-link" target="_blank">네이버지도</a>
        <a href="https://map.kakao.com/?q=제주시 모던그릴" class="map-link" target="_blank">카카오맵</a>
        <a href="https://www.google.com/maps/search/?api=1&query=제주시 모던그릴" class="map-link" target="_blank">구글지도</a>
      </div>
    </div>
  </div>
  
  <!-- (나머지 카테고리 목록은 동일하게 유지) -->
  <!-- ... -->
  
  <script>
    // 기존 모바일 네이버지도 처리 및 네이버 API 관련 함수는 그대로 유지됨
    window.onload = function() {
      setLanguage();
      showCategory('lunch');
    };

    // 기존 showCategory, fetchPlaceImage, updatePlaceImages 함수는 위 스크립트에 포함됨

    document.addEventListener('DOMContentLoaded', function(){
       var naverLinks = document.querySelectorAll('a[href^="https://map.naver.com/"]');
       naverLinks.forEach(function(link) {
           link.addEventListener('click', function(e) {
               if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                   e.preventDefault();
                   var url = new URL(link.href);
                   var query = url.searchParams.get('query') || '';
                   var hasBlurred = false;
                   var fallbackTimeout;
                   window.onblur = function() {
                      hasBlurred = true;
                      clearTimeout(fallbackTimeout);
                   };
                   window.onfocus = function() {
                      if (hasBlurred) {
                         showCategory(currentCategory);
                      }
                      window.onblur = null;
                      window.onfocus = null;
                   };
                   fallbackTimeout = setTimeout(function(){
                       if (!hasBlurred) {
                           window.location.href = 'https://m.map.naver.com/search2/search.naver?query=' + encodeURIComponent(query);
                       }
                   }, 1500);
                   window.location.href = 'nmap://search?query=' + encodeURIComponent(query);
               }
           });
       });
    });
  </script>
</body>
</html>
